
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Run &#8212; Smilei b&#39;v4.3-106-g8c22fd7f\n&#39; documentation</title>
    <link rel="stylesheet" href="_static/smilei_theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://www.gitcdn.xyz/cdn/mathjax/MathJax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/smileiIcon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Post-process" href="post-processing.html" />
    <link rel="prev" title="Write a namelist" href="namelist.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
      scale: 95,
      availableFonts: ["TeX"]
    }
  });
  </script>
   
  </head><body>

<div id="smallScreenMenu" class="off">

    
    <div class="toctree-smilei">
        <ul>
                <li class="outer">
                    <a href="licence.html">Licence</a>
                </li>
                <li class="outer">
                    <a href="synopsis.html">Synopsis</a>
                </li>
                <li class="outer">
                    <a href="highlights.html">Highlights</a>
                </li>
                <li class="outer">
                    <a href="releases.html">Releases</a>
                </li>
        </ul>
        <hr />
        <ul>
                <li class="outer">
                    <a href="units.html">Units</a>
                </li>
                <li class="outer">
                    <a href="algorithms.html">PIC algorithms</a>
                </li>
                <li class="outer">
                    <a href="parallelization.html">Parallelization basics</a>
                </li>
                <li class="outer">
                    <a href="vectorization.html">Vectorization</a>
                </li>
                <li class="outer">
                    <a href="collisions.html">Binary collisions</a>
                </li>
                <li class="outer">
                    <a href="ionization.html">Ionization</a>
                </li>
                <li class="outer">
                    <a href="radiation_loss.html">Synchrotron-like radiation reaction</a>
                </li>
                <li class="outer">
                    <a href="multiphoton_Breit_Wheeler.html">Multiphoton Breit-Wheeler pair creation</a>
                </li>
                <li class="outer">
                    <a href="particle_merging.html">Particle Merging</a>
                </li>
                <li class="outer">
                    <a href="particle_injector.html">Particle Injector</a>
                </li>
                <li class="outer">
                    <a href="laser_envelope.html">Laser envelope model</a>
                </li>
                <li class="outer">
                    <a href="relativistic_fields_initialization.html">Field initialization for relativistic species</a>
                </li>
                <li class="outer">
                    <a href="azimuthal_modes_decomposition.html">Azimuthal modes decomposition</a>
                </li>
        </ul>
        <hr />
        <ul>
                <li class="outer">
                    <a href="installation.html">Install</a>
                </li>
                <li class="outer">
                    <a href="namelist.html">Write a namelist</a>
                </li>
            </ul>
                <ul>
<li><a class="reference internal" href="#">Run</a><ul>
<li><a class="reference internal" href="#the-smilei-executable">The <code class="docutils literal notranslate"><span class="pre">smilei</span></code> executable</a></li>
<li><a class="reference internal" href="#running-in-test-mode">Running in <em>test mode</em></a></li>
<li><a class="reference internal" href="#directory-management">Directory management</a></li>
<li><a class="reference internal" href="#using-the-provided-script">Using the provided script</a></li>
<li><a class="reference internal" href="#running-on-large-clusters">Running on large clusters</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>

            <ul>
                <li class="outer">
                    <a href="post-processing.html">Post-process</a>
                </li>
                <li class="outer">
                    <a href="contribute.html">Contribute</a>
                </li>
        </ul>
        <hr />
        <ul>
                <li class="outer">
                    <a href="material.html">Publications</a>
                </li>
                <li class="outer">
                    <a href="partners.html">Partners</a>
                </li>
                <li class="outer">
                    <a href="https://smileipic.github.io/tutorials">Smilei tutorials</a>
                </li>
        </ul>
        <hr />
    </div>

</div>
<div id="hcontainer">
    <div id="nav_positioner">
        <div id="nav">
            <div id="nav_button" onclick="toggleNav()">
                Sections
            </div>
            <div id="nav_list" class="toctree-smilei">
                <div id="nav_title"><a href="#">Run</a></div>
                <ul>
<li><a class="reference internal" href="#">Run</a><ul>
<li><a class="reference internal" href="#the-smilei-executable">The <code class="docutils literal notranslate"><span class="pre">smilei</span></code> executable</a></li>
<li><a class="reference internal" href="#running-in-test-mode">Running in <em>test mode</em></a></li>
<li><a class="reference internal" href="#directory-management">Directory management</a></li>
<li><a class="reference internal" href="#using-the-provided-script">Using the provided script</a></li>
<li><a class="reference internal" href="#running-on-large-clusters">Running on large clusters</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
    </div>
    
    <div class="headercolor">
    </div>
    <div class="hpositioner">
        <div class="header">
        <div class="logo">
            <a href="index.html">
                <img class="logo" src="_static/smileiLogo.svg" alt="Logo" />
            </a>
        </div>
        <div class="menu"
            id="menu_Overview"
            
        >
            <div id="menuButton_Overview" class="menuButton"
                 onmouseenter="prepareMenu('menu_Overview')"
                 onmousedown="event.preventDefault()"
            >
                <a href="overview.html">
                    <span>Overview</span>
                </a>
            </div>
            <div class="off" onmouseleave="leaveMenu('menu_Overview',this)">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="licence.html">Licence</a>
                        </li>
                        <li class="outer">
                            <a href="synopsis.html">Synopsis</a>
                        </li>
                        <li class="outer">
                            <a href="highlights.html">Highlights</a>
                        </li>
                        <li class="outer">
                            <a href="releases.html">Releases</a>
                        </li>
        
                    </ul>
                </div>
            </div>
        </div>
        <div class="menu"
            id="menu_Understand"
            
        >
            <div id="menuButton_Understand" class="menuButton"
                 onmouseenter="prepareMenu('menu_Understand')"
                 onmousedown="event.preventDefault()"
            >
                <a href="understand.html">
                    <span>Understand</span>
                </a>
            </div>
            <div class="off" onmouseleave="leaveMenu('menu_Understand',this)">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="units.html">Units</a>
                        </li>
                        <li class="outer">
                            <a href="algorithms.html">PIC algorithms</a>
                        </li>
                        <li class="outer">
                            <a href="parallelization.html">Parallelization basics</a>
                        </li>
                        <li class="outer">
                            <a href="vectorization.html">Vectorization</a>
                        </li>
                        <li class="outer">
                            <a href="collisions.html">Binary collisions</a>
                        </li>
                        <li class="outer">
                            <a href="ionization.html">Ionization</a>
                        </li>
                        <li class="outer">
                            <a href="radiation_loss.html">Synchrotron-like radiation reaction</a>
                        </li>
                        <li class="outer">
                            <a href="multiphoton_Breit_Wheeler.html">Multiphoton Breit-Wheeler pair creation</a>
                        </li>
                        <li class="outer">
                            <a href="particle_merging.html">Particle Merging</a>
                        </li>
                        <li class="outer">
                            <a href="particle_injector.html">Particle Injector</a>
                        </li>
                        <li class="outer">
                            <a href="laser_envelope.html">Laser envelope model</a>
                        </li>
                        <li class="outer">
                            <a href="relativistic_fields_initialization.html">Field initialization for relativistic species</a>
                        </li>
                        <li class="outer">
                            <a href="azimuthal_modes_decomposition.html">Azimuthal modes decomposition</a>
                        </li>
        
                    </ul>
                </div>
            </div>
        </div>
        <div class="menu"
            id="menu_Use"
            style="font-weight:bold"
        >
            <div id="menuButton_Use" class="menuButton"
                 onmouseenter="prepareMenu('menu_Use')"
                 onmousedown="event.preventDefault()"
            >
                <a href="use.html">
                    <span>Use</span>
                </a>
            </div>
            <div class="off" onmouseleave="leaveMenu('menu_Use',this)">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="installation.html">Install</a>
                        </li>
                        <li class="outer">
                            <a href="namelist.html">Write a namelist</a>
                        </li>
                        <li >
                            <a href="#">Run</a>
                        </li>
                        <li class="outer">
                            <a href="post-processing.html">Post-process</a>
                        </li>
                        <li class="outer">
                            <a href="contribute.html">Contribute</a>
                        </li>
        
                    </ul>
                </div>
            </div>
        </div>
        <div class="last menu"
            id="menu_More"
            
        >
            <div id="menuButton_More" class="menuButton"
                 onmouseenter="prepareMenu('menu_More')"
                 onmousedown="event.preventDefault()"
            >
                <a href="more.html">
                    <span>More</span>
                </a>
            </div>
            <div class="off" onmouseleave="leaveMenu('menu_More',this)">
                <div class="toctree-smilei">
                    <ul>
                        <li class="outer">
                            <a href="material.html">Publications</a>
                        </li>
                        <li class="outer">
                            <a href="partners.html">Partners</a>
                        </li>
                        <li class="outer">
                            <a href="https://smileipic.github.io/tutorials">Smilei tutorials</a>
                        </li>
        
                    </ul>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            var es=document.getElementsByClassName("menuButton"), i=0;
            var evt = "ontouchend" in document ? "touchend" : "click";
            for( var i=0; i<es.length; i+=1 ) {
                es[i].addEventListener(evt, function(a){ return function(){toggleMenu(a)};}(es[i].parentNode.id));
            }
        </script>
        
        <div id="searchbox" role="search" style="display:none">
            <form class="search" action="search.html" method="get">
              <input type="text" name="q" placeholder="Search" id="searchinput" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
        
        <div id="searchicon" onclick="openSearch()" style="display:block">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 80 120">
              <g transform="translate(0,-932.36216)" >
                <circle
                   r="25" cy="977.51044" cx="38.078663"
                   style="opacity:1;fill:none;stroke:#ffffff;stroke-width:10;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
                <rect
                   transform="matrix(0.36717877,0.93015039,-0.93427297,0.35655858,0,0)"
                   rx="4.9996676" ry="7.4995141"
                   y="316.16959" x="947.6142"
                   height="14.117695" width="46.476151"
                   style="opacity:1;fill:#ffffff;fill-opacity:1;stroke:none;" />
                <path
                   d="m 41.383282,962.25996 a 15,15 0 0 1 11.660107,11.6355"
                   style="opacity:1;fill:none;stroke:#ffffff;stroke-width:3;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
              </g>
            </svg>
        </div>
        <div id="closesearchicon" onclick="closeSearch()" style="display:none">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 80 120">
              <g
                 transform="translate(0,-932.36216)">
                <path
                   d="m 10,962.36216 60,60.00004"
                   style="fill:none;stroke:#ffffff;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
                <path
                   d="M 70,962.36216 10,1022.3622"
                   style="fill:none;stroke:#ffffff;stroke-width:10;stroke-linecap:round;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" />
              </g>
            </svg>
        </div>
        
        <div id="smallScreenMenuButton" onclick="toggleSmallScreenMenu(event)">
            <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"
               viewBox="-20 -20 140 140">
              <g  style="fill:#ffffff;stroke:none;">
                <circle cx="15" cy="20" r="5" />
                <circle cx="35" cy="20" r="5" />
                <circle cx="85" cy="20" r="5" />
                <rect width="50" height="10" x="35" y="15" rx="0" ry="0" />
                <circle cx="15" cy="40" r="5" />
                <circle cx="35" cy="40" r="5" />
                <circle cx="85" cy="40" r="5" />
                <rect width="50" height="10" x="35" y="35" rx="0" ry="0" />
                <circle cx="15" cy="60" r="5" />
                <circle cx="35" cy="60" r="5" />
                <circle cx="85" cy="60" r="5" />
                <rect width="50" height="10" x="35" y="55" rx="0" ry="0" />
                <circle cx="15" cy="80" r="5" />
                <circle cx="35" cy="80" r="5" />
                <circle cx="85" cy="80" r="5" />
                <rect width="50" height="10" x="35" y="75" rx="0" ry="0" />
              </g>
            </svg>
        </div>
        
    </div>
    
</div>
</div>

    <div class="document">
    <div class="documentwrapper">
        <div class="body" role="main">
          
  <div class="section" id="run">
<span id="id1"></span><h1>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h1>
<p>Before you launch <strong class="program">Smilei</strong>, <a class="reference internal" href="namelist.html"><span class="doc">write a namelist file</span></a>
containing all the information of your simulation (grid shape, particles, lasers, diagnostics, etc.).</p>
<p>You can also start from an example provided in the <code class="docutils literal notranslate"><span class="pre">benchmarks</span></code> directory.</p>
<hr class="docutils" />
<div class="section" id="the-smilei-executable">
<h2>The <code class="docutils literal notranslate"><span class="pre">smilei</span></code> executable<a class="headerlink" href="#the-smilei-executable" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="compile">Compiling Smilei</a> creates an executable file <code class="docutils literal notranslate"><span class="pre">smilei</span></code> in the source directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>smilei arg1 arg2 arg3 ...
</pre></div>
</div>
<p>The command-line arguments <code class="docutils literal notranslate"><span class="pre">arg1</span></code>, <code class="docutils literal notranslate"><span class="pre">arg2</span></code>, <code class="docutils literal notranslate"><span class="pre">arg3</span></code> (etc.) can be:</p>
<ul class="simple">
<li><p>the path to a namelist</p></li>
<li><p>any <em>python</em> instruction that you want to execute during the namelist reading.</p></li>
</ul>
<p>The simplest example, to run your namelist <code class="docutils literal notranslate"><span class="pre">my_namelist.py</span></code>, is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./smilei  my_namelist.py
</pre></div>
</div>
<p>You may also add an additional instruction to be appended at the end of the namelist:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./smilei  my_namelist.py  <span class="s2">&quot;Main.print_every=10&quot;</span>
</pre></div>
</div>
<p>Note that, in addition, you will generally use the <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> or <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code> command
to run <strong class="program">Smilei</strong> on several MPI processes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun -n <span class="m">4</span> ./smilei  my_namelist.py  <span class="s2">&quot;Main.print_every=10&quot;</span>
</pre></div>
</div>
<p>If you want to run several openMP threads per MPI processes, you usually have to set
the following environment variable to the desired number of threads before running
<code class="docutils literal notranslate"><span class="pre">mpirun</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">4</span>
</pre></div>
</div>
<p>When running <strong class="program">Smilei</strong>, the output log will remind you how many MPI processes and openMP threads
your simulation is using.</p>
</div>
<hr class="docutils" />
<div class="section" id="running-in-test-mode">
<h2>Running in <em>test mode</em><a class="headerlink" href="#running-in-test-mode" title="Permalink to this headline">¶</a></h2>
<p>A second executable <code class="docutils literal notranslate"><span class="pre">smilei_test</span></code> is available (after the usual compilation)
to run in the <em>test mode</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./smilei_test my_namelist.py
</pre></div>
</div>
<p>This <em>test mode</em> does the same initialization as the normal mode,
except it only loads the first patch of the full simulation. After initialization,
the test mode exits so that the PIC loop is <em>not</em> computed.</p>
<p>This mode may be used to check the consistency of the namelist, and to make sure
simple errors will not occur. It does not check all possible errors, but it runs fast.</p>
<p>Running in <strong>test mode requires to run on 1 MPI process only</strong>. However, it is possible
to indicate what is the partition of MPI processes and OpenMP threads intended for the
actual simulation. For instance, to test your namelist that is intended to run on 1024 MPI
processes, each hosting 12 OpenMP threads, use the following syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./smilei_test <span class="m">1024</span> <span class="m">12</span> my_namelist.py
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="directory-management">
<h2>Directory management<a class="headerlink" href="#directory-management" title="Permalink to this headline">¶</a></h2>
<p>Let us assume you have written your namelist <code class="docutils literal notranslate"><span class="pre">my_namelist.py</span></code>, and that you placed it
inside your home directory. Also, we assume that the <code class="docutils literal notranslate"><span class="pre">Smilei</span></code> directory is also there,
so that the <code class="docutils literal notranslate"><span class="pre">smilei</span></code> executable is located in <code class="docutils literal notranslate"><span class="pre">~/Smilei/</span></code>.</p>
<p>Knowing that <strong class="program">Smilei</strong> generally writes out all the results in the current directory,
it is recommended to create a new directory to store these results. For instance:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/my_simulation                     <span class="c1"># New directory to store results</span>
$ cp ~/my_namelist.py ~/my_simulation       <span class="c1"># Copies the namelist there</span>
$ <span class="nb">cd</span> ~/my_simulation                        <span class="c1"># Goes there</span>
$ mpirun -n <span class="m">4</span> ~/Smilei/smilei my_namelist   <span class="c1"># Run with 4 processors</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="using-the-provided-script">
<h2>Using the provided script<a class="headerlink" href="#using-the-provided-script" title="Permalink to this headline">¶</a></h2>
<p>For simple cases such as the previous one, use the script <code class="docutils literal notranslate"><span class="pre">smilei.sh</span></code>, provided in
the <cite>Smilei</cite> directory. You only have to run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./smilei.sh <span class="m">4</span> my_namelist.py
</pre></div>
</div>
<p>where the number 4 says that the code will run 4 MPI processes. A directory with all
the results will automatically be created next to your namelist.</p>
</div>
<hr class="docutils" />
<div class="section" id="running-on-large-clusters">
<h2>Running on large clusters<a class="headerlink" href="#running-on-large-clusters" title="Permalink to this headline">¶</a></h2>
<p>We do not provide instructions to run on super-computers yet. Please refer to your
administrators.</p>
</div>
<hr class="docutils" />
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>In case of problems, the code can be compiled with additional debugging flags (usual <code class="docutils literal notranslate"><span class="pre">-g</span></code> and <code class="docutils literal notranslate"><span class="pre">-O0</span></code>) and internal
checks by compiling it with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nv">config</span><span class="o">=</span>debug
</pre></div>
</div>
<p>Compiling the whole code with this command will make it very slow to run.
But to check only a particular file for errors, first compile the code with <code class="docutils literal notranslate"><span class="pre">make</span></code>, then
modify the file, and recompile in debug mode.</p>
<p>In debug mode, these C++ macros are activated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DEBUG(&quot;some</span> <span class="pre">text&quot;</span> <span class="pre">[&lt;&lt;</span> <span class="pre">other</span> <span class="pre">streamable])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEREIAM(&quot;some</span> <span class="pre">text&quot;</span> <span class="pre">[&lt;&lt;</span> <span class="pre">other</span> <span class="pre">streamable])</span></code></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>OpenMPI <code class="docutils literal notranslate"><span class="pre">2.*</span></code> often causes unstable behavior in Smilei.
For instance, with <code class="docutils literal notranslate"><span class="pre">openmpi</span> <span class="pre">2.1</span></code>, the <cite>vader</cite> protocol seems to interfere with Smilei’s
memory management and comunications. We therefore recommend to disable this
protocol when running <code class="docutils literal notranslate"><span class="pre">mpirun</span></code>, as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpirun --mca btl ^vader -n <span class="m">4</span> ~/Smilei/smilei my_namelist   <span class="c1"># Disable vader</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>


        </div></div>
    </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      <div>
      <a href="site.html">Site index</a>
      </div>
      <div>
        Last updated on Feb 17, 2020
      </div>
      
      <div>
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.1</a>
      </div>
      
    </div>
    
    <script type="text/javascript">
        
        var nav = document.getElementById("nav");
        var nav_list = document.getElementById("nav_list");
        var nav_button = document.getElementById("nav_button");
        var smallScreenMenu = document.getElementById("smallScreenMenu");
        var smallScreenMenuButton = document.getElementById("smallScreenMenuButton");
        var searchicon = document.getElementById("searchicon");
        var searchbox  = document.getElementById("searchbox");
        var searchinput= document.getElementById("searchinput");
        var menus = document.getElementsByClassName("menu");
        for( var i=0; i<menus.length; i++ )
            menus[i].active = false;
        
        
        var ul = nav_list.getElementsByTagName("ul")[0], li;
        var keep_nav = false;
        if( ul ) {
            li = ul.firstElementChild;
            if( li ) {
                if( li.getElementsByTagName("ul").length > 0 ) keep_nav = true;
            }
        }
        if( keep_nav ) {
            li.removeChild( li.firstElementChild );
        } else {
            document.getElementById("nav_positioner").removeChild( document.getElementById("nav") );
        }
        
        function navOff() {
            nav_list.style.display = "none";
            nav_button.className = "";
            nav.style.overflowY = "visible";
        }
        
        function toggleNav() {
            for( var i=0; i<menus.length; i++ )
                menuOff( menus[i] );
            if( nav_list.style.display != "inline-block" ) {
                nav_list.style.display = "inline-block";
                nav_button.className = "pushed";
                nav.style.overflowY = "auto";
            } else {
                navOff();
            }
        }
        
        function toggleSmallScreenMenu(e) {
            e.preventDefault();
            if( smallScreenMenu.className != "on" ) {
                smallScreenMenu.className = "on";
                smallScreenMenuButton.className = "pushed";
            } else {
                smallScreenMenu.className = "off";
                smallScreenMenuButton.className = "";
            }
        }
        
        function prepareMenu(menu_id) {
            var menu = document.getElementById(menu_id);
            menu.timer1 = setTimeout(function(a){ return function(){thisMenuOnly(a)};}(menu_id), 100);
            menu.addEventListener("mouseleave", function(a){ return function(){clearTimeout(a.timer1)};}(menu) );
        }
        
        function leaveMenu(menu_id, source) {
            var menu = document.getElementById(menu_id);
            menu.timer2 = setTimeout(function(a){ return function(){menuOff(a)};}(menu), 1000);
            source.addEventListener("mouseenter", function(a){ return function(){clearTimeout(a.timer2)};}(menu) );
        }
        
        function menuOn( menu ) {
            var divs = menu.getElementsByTagName("div");
            if(nav_list) navOff();
            divs[1].className = "on";
            divs[0].className = "menuButton pushed";
            menu.active = true;
        }
        function menuOff( menu ) {
            var divs = menu.getElementsByTagName("div");
            divs[1].className = "off";
            divs[0].className = "menuButton";
            menu.active = false;
        }
        
        function thisMenuOnly(menu_id) {
            var menu = document.getElementById(menu_id);
            for( var i=0; i<menus.length; i++ )
                if( i!=menu_id )
                    menuOff( menus[i] );
            menuOn( menu );
        }
        
        function toggleMenu(menu_id) {
            var menu = document.getElementById(menu_id);
            if( menu.active ) {
                menuOff( menu );
            } else {
                for( var i=0; i<menus.length; i++ )
                    if( i!=menu_id )
                        menuOff( menus[i] );
                menuOn( menu );
            }
        }
        
        function openSearch() {
            for( var i=0; i<menus.length; i++ ) {
                menuOff( menus[i] );
                menus[i].style.zIndex = "-1";
            }
            searchicon.style.display = "none";
            closesearchicon.style.display = "block";
            searchbox.style.display = "block";
            searchinput.focus();
        }
        
        function closeSearch() {
            searchicon.style.display = "block";
            closesearchicon.style.display = "none";
            searchbox .style.display = "none";
            for( var i=0; i<menus.length; i++ )
                menus[i].style.zIndex = "0";
        }
        
        
        var documentDiv = document.getElementsByClassName("document")[0];
        documentDiv.addEventListener('click', function (event) {
            if(nav_list) navOff();
            for( var i=0; i<menus.length; i++ )
                menuOff( menus[i] );
        });
    </script>
  </body>
</html>